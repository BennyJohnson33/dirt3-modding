#include <stdio.h>
#include <malloc.h>

enum VAR {
	VAR_FLOAT,
	VAR_INT,
	VAR_STRING
};

enum VAR vars[] = {	VAR_INT, VAR_INT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT,
		VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT,
		VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT,
		VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT,
		VAR_FLOAT, VAR_FLOAT, VAR_STRING, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT,
		VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT,
		VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT,
		VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_STRING, VAR_FLOAT, VAR_FLOAT, VAR_STRING, VAR_FLOAT,
		VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT,
		VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT,
		VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT,
		VAR_FLOAT, VAR_FLOAT, VAR_INT, VAR_INT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT,
		VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT,
		VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT,
		VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT,
		VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT,
		VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_INT,
		VAR_INT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT,
		VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_STRING, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_INT,
		VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT,
		VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT,
		VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT,
		VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_INT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT,
		VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT,
		VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT,
		VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT,
		VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT,
		VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT,
		VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT,
		VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT,
		VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT,
		VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT,
		VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT,
		VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT,
		VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_STRING, VAR_STRING, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT,
		VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT,
		VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_INT,
		VAR_STRING, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT,
		VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT,
		VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT,
		VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT,
		VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT, VAR_FLOAT,
		VAR_FLOAT};

void dump(char *buf) {
	int i;
	for (i = 0; i < (sizeof(vars)/sizeof(enum VAR)); i++) {
		switch (vars[i]) {
			printf("%d: ", vars[i]);
			case VAR_FLOAT:
				printf("%.4f\n", *(float*)buf);
				buf += 4;
				break;
			case VAR_INT:
				printf("%d\n", *(int*)buf);
				buf += 4;
				break;
			case VAR_STRING:
				printf("%s\n", buf);
				while (*buf) buf++;
				buf++;
				break;
		}
	}
}

int main(int argc, char *argv[]) {
	FILE *in;
	char *buf;
	long size;

	if (argc < 2) {
		printf("Usage: %s <ctf file>\n", argv[0]);
		return;
	}

	if (argc > 2) {
		printf("%s\n", argv[2]);
	}

	in = fopen(argv[1], "rb");
	if (in == NULL) {
		printf("Could not open input file\n");
		return 1;
	}

	fseek(in, 0, SEEK_END);
	size = ftell(in);
	rewind(in);

	buf = (char*)malloc(sizeof(char)*size);
	if (fread(buf, 1, size, in) != size) {
		printf("Read error\n");
		return 2;
	}

	fclose(in);

	dump(buf);

	free(buf);
	return 1;
}
